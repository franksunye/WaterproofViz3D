# 3D房屋模型应用设计文档

## 设计理念

本应用的设计理念是创建一个简单、直观且可扩展的3D房屋模型，使用户能够轻松查看和定制房屋的不同部分。设计注重用户体验、性能和可扩展性，为未来的屋顶维修功能奠定基础。

## 用户界面设计

### 布局

应用采用双栏布局：
- **左侧**：3D渲染区域，占据主要空间，用于显示房屋模型
- **右侧**：菜单区域，固定宽度，包含可选择的房屋部分和控制按钮

### 菜单设计

菜单包含以下元素：
1. **标题区域**：显示应用名称和简短描述
2. **部件选择项**：每个选项包含图标、标题和描述
   - 屋顶
   - 墙壁
   - 窗户
   - 门
3. **控制按钮**：重置视图按钮，位于菜单底部

### 交互设计

1. **视图控制**：
   - 鼠标左键拖动：旋转视图
   - 鼠标滚轮：缩放视图
   - 鼠标右键拖动：平移视图

2. **部件选择**：
   - 点击菜单项选择对应部件
   - 选中的菜单项显示为高亮状态
   - 3D模型中对应部分也会高亮显示

3. **重置功能**：
   - 点击重置按钮恢复初始视角
   - 取消所有高亮状态

## 3D模型设计

### 模型层次结构

```
House (Group)
├── Foundation (Mesh)
├── Walls (Group)
│   └── MainWalls (Mesh)
├── Roof (Group)
│   └── MainRoof (Mesh)
├── Windows (Group)
│   └── Multiple Window Groups
└── Doors (Group)
    └── Door (Mesh)
```

### 几何体选择

1. **地基**：BoxGeometry，扁平长方体
2. **墙壁**：BoxGeometry，长方体
3. **屋顶**：ConeGeometry，旋转45度的四面锥体
4. **窗户**：组合几何体，包括窗框和玻璃
5. **门**：BoxGeometry，带有球形门把手

### 材质设计

1. **地基**：灰色标准材质，表示混凝土
2. **墙壁**：砖红色标准材质，粗糙度0.7
3. **屋顶**：棕色标准材质，粗糙度0.6
4. **窗户**：
   - 窗框：白色标准材质
   - 玻璃：半透明蓝色材质，透明度0.7
5. **门**：棕色标准材质，带有金色门把手
6. **高亮效果**：黄色半透明材质，带有发光效果

## 技术设计

### 场景设置

1. **场景(Scene)**：使用浅灰色背景
2. **相机(Camera)**：透视相机，初始位置在房屋右前上方
3. **渲染器(Renderer)**：WebGLRenderer，启用抗锯齿和阴影

### 光照设计

1. **环境光(AmbientLight)**：白色，强度0.5，提供基础照明
2. **平行光(DirectionalLight)**：白色，强度0.8，模拟太阳光
   - 位置：右上方
   - 启用阴影投射
   - 阴影贴图大小：2048x2048

### 控制器设置

使用OrbitControls实现相机控制：
- 启用阻尼效果(damping)，使相机移动更平滑
- 设置适当的缩放限制
- 配置控制器目标点为房屋中心

### 高亮实现

1. 保存所有原始材质到Map中
2. 当选择部件时，将其所有子网格的材质替换为高亮材质
3. 取消选择时，恢复原始材质

## 性能考虑

1. **几何体简化**：使用低多边形模型减少渲染负担
2. **材质共享**：相同类型的部件共享材质实例
3. **渲染优化**：
   - 只在需要时渲染（如相机移动后）
   - 适当设置阴影贴图大小，平衡质量和性能

## 可访问性设计

1. **颜色对比**：确保UI元素有足够的颜色对比度
2. **键盘导航**：支持使用键盘控制相机和选择菜单项
3. **响应式设计**：适应不同屏幕尺寸

## 未来扩展考虑

设计考虑了以下未来扩展点：

1. **模型结构**：使用组(Group)组织模型，便于添加更多细节
2. **材质系统**：设计可以轻松替换的材质系统，便于实现材料选择功能
3. **交互框架**：建立可扩展的交互框架，便于添加更多交互功能
4. **UI布局**：预留空间用于添加更多控制选项和信息显示
